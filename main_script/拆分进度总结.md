# Bazaar_Lens.py æ‹†åˆ†è¿›åº¦æ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. åŸºç¡€æ¨¡å—æ‹†åˆ†
- âœ… **config.py** - é…ç½®ç®¡ç†ï¼ˆConfigManagerç±»ï¼‰
- âœ… **logger.py** - æ—¥å¿—ç®¡ç†ï¼ˆæ—¥å¿—é…ç½®ã€æ§åˆ¶å°æ§åˆ¶ï¼‰
- âœ… **ocr.py** - OCRåŠŸèƒ½ï¼ˆocr_taskã€direct_ocrï¼‰
- âœ… **ui/components.py** - UIç»„ä»¶ï¼ˆIconFrameã€ScrollableFrameï¼‰

### 2. æ•°æ®ç®¡ç†æ¨¡å—
- âœ… **data/loader.py** - æ•°æ®åŠ è½½å™¨ï¼ˆDataLoaderç±»ï¼‰
- âœ… **data/matcher.py** - æ–‡æœ¬åŒ¹é…å™¨ï¼ˆå ä½ï¼‰

### 3. æ¸¸æˆç›¸å…³æ¨¡å—
- âœ… **game/position.py** - ä½ç½®é…ç½®ï¼ˆPositionConfigç±»ï¼‰
- âœ… **game/monitor.py** - æ¸¸æˆæ—¥å¿—ç›‘æ§ï¼ˆå ä½ï¼‰

### 4. ç³»ç»ŸåŠŸèƒ½æ¨¡å—
- âœ… **system/admin.py** - ç®¡ç†å‘˜æƒé™
- âœ… **system/tray.py** - ç³»ç»Ÿæ‰˜ç›˜ï¼ˆå ä½ï¼‰
- âœ… **system/update.py** - æ›´æ–°æ£€æŸ¥ï¼ˆå ä½ï¼‰

### 5. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ˆBazaarHelperæ‹†åˆ†ï¼‰
- âœ… **core/gui_manager.py** - GUIçª—å£ç®¡ç†å™¨ï¼ˆå ä½ï¼‰
- âœ… **core/ocr_processor.py** - OCRå¤„ç†å™¨ï¼ˆå ä½ï¼‰
- âœ… **core/window_detector.py** - æ¸¸æˆçª—å£æ£€æµ‹å™¨ï¼ˆå ä½ï¼‰
- âœ… **core/cleanup_manager.py** - æ¸…ç†ç®¡ç†å™¨ï¼ˆå ä½ï¼‰
- âœ… **core/main_controller.py** - ä¸»æ§åˆ¶å™¨ï¼ˆæ•´åˆæ‰€æœ‰æ¨¡å—ï¼‰

## ğŸ“Š æ‹†åˆ†æ•ˆæœ

### æ‹†åˆ†å‰
- **Bazaar_Lens.py**: 6690è¡Œ
  - BazaarHelperç±»: ~5000è¡Œï¼ˆæ‰€æœ‰åŠŸèƒ½æ··åœ¨ä¸€èµ·ï¼‰
  - å…¶ä»–ç±»å’Œå‡½æ•°: ~1690è¡Œ

### æ‹†åˆ†åï¼ˆå½“å‰çŠ¶æ€ï¼‰
- **åŸºç¡€æ¨¡å—**: ~500è¡Œ
- **æ•°æ®æ¨¡å—**: ~200è¡Œ
- **æ¸¸æˆæ¨¡å—**: ~150è¡Œ
- **ç³»ç»Ÿæ¨¡å—**: ~100è¡Œ
- **æ ¸å¿ƒæ¨¡å—**: ~200è¡Œï¼ˆå ä½ï¼Œå¾…å®Œå–„ï¼‰
- **æ€»è®¡**: ~1150è¡Œï¼ˆå·²æ‹†åˆ†ï¼‰
- **å¾…æ‹†åˆ†**: ~5540è¡Œï¼ˆä»åœ¨Bazaar_Lens.pyä¸­ï¼‰

## â³ å¾…å®Œæˆå·¥ä½œ

### 1. å®Œå–„å ä½æ¨¡å—
éœ€è¦ä» `Bazaar_Lens.py` ä¸­æå–å®Œæ•´å®ç°ï¼š

- **data/matcher.py** - æ–‡æœ¬åŒ¹é…é€»è¾‘
  - `fuzzy_match_game_text()` æ–¹æ³•
  - `find_best_match()` æ–¹æ³•
  - å…¶ä»–åŒ¹é…ç›¸å…³æ–¹æ³•

- **game/monitor.py** - æ¸¸æˆæ—¥å¿—ç›‘æ§
  - `_monitor_log()` æ–¹æ³•å®Œæ•´å®ç°
  - æ—¥å¿—è§£æé€»è¾‘

- **system/tray.py** - ç³»ç»Ÿæ‰˜ç›˜
  - `_create_tray_icon()` å®Œæ•´å®ç°
  - æ‰˜ç›˜èœå•å’Œäº‹ä»¶å¤„ç†

- **system/update.py** - æ›´æ–°æ£€æŸ¥
  - `check_update()` å®Œæ•´å®ç°
  - `should_check_update()` å®Œæ•´å®ç°

- **core/gui_manager.py** - GUIç®¡ç†
  - `create_info_window()` å®Œæ•´å®ç°
  - `update_info_window()` å®Œæ•´å®ç°
  - `start_gui_update_timer()` å®Œæ•´å®ç°

- **core/ocr_processor.py** - OCRå¤„ç†
  - `capture_and_ocr()` å®Œæ•´å®ç°
  - `process_ocr_text()` å®Œæ•´å®ç°
  - å›¾åƒé¢„å¤„ç†é€»è¾‘

- **core/window_detector.py** - çª—å£æ£€æµ‹
  - `get_game_window()` å®Œæ•´å®ç°
  - `is_cursor_in_icon_area()` å®Œæ•´å®ç°
  - `calculate_name_area_from_icon()` å®Œæ•´å®ç°

- **core/cleanup_manager.py** - æ¸…ç†ç®¡ç†
  - `cleanup_temp_files()` å®Œæ•´å®ç°
  - `cleanup_system_tray_icons()` å®Œæ•´å®ç°
  - å…¶ä»–æ¸…ç†æ–¹æ³•

### 2. é‡æ„ä¸»ç¨‹åº
- æ›´æ–° `Bazaar_Lens.py` ä½¿ç”¨æ–°çš„æ¨¡å—ç»“æ„
- ç§»é™¤å·²æ‹†åˆ†çš„ä»£ç 
- ä¿ç•™ç¨‹åºå…¥å£
- ä½¿ç”¨ `MainController` æ›¿ä»£ `BazaarHelper`

## ğŸ“ æœ€ç»ˆç›®å½•ç»“æ„

```
main_script/
â”œâ”€â”€ Bazaar_Lens.py          # ä¸»ç¨‹åºï¼ˆå¾…é‡æ„ï¼Œå°†å¤§å¹…ç®€åŒ–ï¼‰
â”œâ”€â”€ config.py                # é…ç½®ç®¡ç†
â”œâ”€â”€ logger.py                # æ—¥å¿—ç®¡ç†
â”œâ”€â”€ ocr.py                   # OCRåŠŸèƒ½
â”œâ”€â”€ ui/                      # UIç»„ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ components.py
â”œâ”€â”€ data/                    # æ•°æ®ç®¡ç†
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ loader.py
â”‚   â””â”€â”€ matcher.py
â”œâ”€â”€ game/                    # æ¸¸æˆç›¸å…³
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ position.py
â”‚   â””â”€â”€ monitor.py
â”œâ”€â”€ system/                  # ç³»ç»ŸåŠŸèƒ½
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ admin.py
â”‚   â”œâ”€â”€ tray.py
â”‚   â””â”€â”€ update.py
â””â”€â”€ core/                    # æ ¸å¿ƒåŠŸèƒ½ï¼ˆBazaarHelperæ‹†åˆ†ï¼‰
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ gui_manager.py
    â”œâ”€â”€ ocr_processor.py
    â”œâ”€â”€ window_detector.py
    â”œâ”€â”€ cleanup_manager.py
    â””â”€â”€ main_controller.py
```

## âœ… è¯­æ³•æ£€æŸ¥ç»“æœ

æ‰€æœ‰æ–°åˆ›å»ºçš„æ¨¡å—æ–‡ä»¶å·²é€šè¿‡è¯­æ³•æ£€æŸ¥ï¼š
- âœ… æ— è¯­æ³•é”™è¯¯
- âœ… ç¼©è¿›æ­£ç¡®ï¼ˆ4ç©ºæ ¼ï¼‰
- âœ… ä»£ç å—ç»“æ„å®Œæ•´
- âœ… å¯¼å…¥è·¯å¾„å·²ä¿®å¤

## ğŸ¯ ä¸‹ä¸€æ­¥

1. ä» `Bazaar_Lens.py` æå–å„å ä½æ¨¡å—çš„å®Œæ•´å®ç°
2. é‡æ„ `Bazaar_Lens.py` ä½¿ç”¨æ–°çš„æ¨¡å—ç»“æ„
3. æµ‹è¯•éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
