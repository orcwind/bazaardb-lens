# Bazaar_Lens æ‰“åŒ…å‘å¸ƒæ­¥éª¤

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. æ£€æŸ¥å¿…é¡»æ–‡ä»¶
ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ï¼š
- âœ… `Bazaar_Lens.py` - ä¸»ç¨‹åº
- âœ… `Bazaar_Lens.ico` - ç¨‹åºå›¾æ ‡
- âœ… `Help.txt` - å¸®åŠ©æ–‡æ¡£
- âœ… `6.0/crawlers/monster_details_v3/monsters_v3.json` - æ€ªç‰©æ•°æ®
- âœ… `6.0/crawlers/monster_details_v3/icons/*.webp` - æ€ªç‰©å›¾æ ‡ï¼ˆ724ä¸ªï¼‰
- âœ… `6.0/crawlers/event_details_final/events_final.json` - äº‹ä»¶æ•°æ®
- âœ… `6.0/crawlers/event_details_final/icons/**/*.webp` - äº‹ä»¶å›¾æ ‡ï¼ˆå­ç›®å½•ï¼‰
- âœ… `tesseract-ocr-w64-setup-5.5.0.20241111.exe` - OCRå®‰è£…ç¨‹åº
- âœ… `eng.traineddata` - OCRè‹±æ–‡æ•°æ®
- âœ… `osd.traineddata` - OCRæ–¹å‘æ•°æ®

### 2. å®‰è£…ä¾èµ–
```bash
pip install pyinstaller
pip install -r requirements.txt
```

## ğŸ”¨ æ­¥éª¤ä¸€ï¼šä½¿ç”¨ PyInstaller æ‰“åŒ…

### æ–¹æ³•1ï¼šä½¿ç”¨æ‰“åŒ…è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
python build.py
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ£€æŸ¥æ‰€æœ‰å¿…é¡»æ–‡ä»¶
- ç»Ÿè®¡å›¾æ ‡æ•°é‡
- æ‰§è¡Œ PyInstaller æ‰“åŒ…
- æ˜¾ç¤ºæ‰“åŒ…ç»“æœ

### æ–¹æ³•2ï¼šæ‰‹åŠ¨æ‰§è¡Œ PyInstaller
```bash
pyinstaller --onefile --windowed --icon=Bazaar_Lens.ico ^
  --name=Bazaar_Lens ^
  --add-data "6.0/crawlers/monster_details_v3/monsters_v3.json;6.0/crawlers/monster_details_v3" ^
  --add-data "6.0/crawlers/monster_details_v3/icons;6.0/crawlers/monster_details_v3/icons" ^
  --add-data "6.0/crawlers/event_details_final/events_final.json;6.0/crawlers/event_details_final" ^
  --add-data "6.0/crawlers/event_details_final/icons;6.0/crawlers/event_details_final/icons" ^
  --hidden-import=PIL._tkinter_finder ^
  --hidden-import=cv2 ^
  --hidden-import=numpy ^
  --hidden-import=pytesseract ^
  --hidden-import=pystray ^
  --hidden-import=psutil ^
  --clean ^
  Bazaar_Lens.py
```

### æ‰“åŒ…ç»“æœ
- è¾“å‡ºæ–‡ä»¶ï¼š`dist/Bazaar_Lens.exe`
- å¤§å°ï¼šçº¦ 50-80 MBï¼ˆåŒ…å«æ‰€æœ‰æ•°æ®å’Œå›¾æ ‡ï¼‰

## ğŸ“¦ æ­¥éª¤äºŒï¼šåˆ›å»ºå®‰è£…ç¨‹åº

### 1. å®‰è£… Inno Setup
- ä¸‹è½½åœ°å€ï¼šhttps://jrsoftware.org/isdl.php
- å®‰è£… Inno Setup 6.x æˆ–æ›´é«˜ç‰ˆæœ¬

### 2. ç¼–è¯‘å®‰è£…ç¨‹åº
ä½¿ç”¨ Inno Setup ç¼–è¯‘ `Bazaar_Lens_Installer.iss`ï¼š

**æ–¹æ³•1ï¼šGUIæ–¹å¼**
1. æ‰“å¼€ Inno Setup Compiler
2. æ‰“å¼€æ–‡ä»¶ `Bazaar_Lens_Installer.iss`
3. ç‚¹å‡» Build â†’ Compileï¼ˆæˆ–æŒ‰ Ctrl+F9ï¼‰
4. ç­‰å¾…ç¼–è¯‘å®Œæˆ

**æ–¹æ³•2ï¼šå‘½ä»¤è¡Œæ–¹å¼**
```bash
"C:\Program Files (x86)\Inno Setup 6\ISCC.exe" Bazaar_Lens_Installer.iss
```

### 3. å®‰è£…ç¨‹åºè¾“å‡º
- è¾“å‡ºç›®å½•ï¼š`Output/`
- æ–‡ä»¶åï¼š`Bazaar_Lens_Installer_v[ç‰ˆæœ¬å·].exe`
- å¤§å°ï¼šçº¦ 110-150 MB

## âœ… æ­¥éª¤ä¸‰ï¼šæµ‹è¯•å®‰è£…ç¨‹åº

### 1. åŸºæœ¬æµ‹è¯•
1. è¿è¡Œå®‰è£…ç¨‹åº
2. é€‰æ‹©å®‰è£…è·¯å¾„
3. ç­‰å¾…å®‰è£…å®Œæˆ
4. æ£€æŸ¥ Tesseract OCR æ˜¯å¦æ­£ç¡®å®‰è£…

### 2. åŠŸèƒ½æµ‹è¯•
1. å¯åŠ¨ Bazaar_Lens.exe
2. æŒ‰ä½ Ctrl é”®
3. å°†é¼ æ ‡æ‚¬åœåœ¨æ¸¸æˆæ€ªç‰©/äº‹ä»¶ä¸Š
4. æ£€æŸ¥æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºä¿¡æ¯å’Œå›¾æ ‡

### 3. ç³»ç»Ÿæ‰˜ç›˜æµ‹è¯•
1. å³é”®ç‚¹å‡»ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡
2. æµ‹è¯•å„ä¸ªèœå•é¡¹ï¼š
   - Help - æ‰“å¼€å¸®åŠ©æ–‡æ¡£
   - Set tesseract-ocr.exe Path - è®¾ç½®OCRè·¯å¾„
   - Debug Window Detection - è°ƒè¯•çª—å£æ£€æµ‹
   - Debug Icon Loading - è°ƒè¯•å›¾æ ‡åŠ è½½
   - Quit - é€€å‡ºç¨‹åº

### 4. å¸è½½æµ‹è¯•
1. ä»æ§åˆ¶é¢æ¿å¸è½½ç¨‹åº
2. æ£€æŸ¥æ˜¯å¦å®Œå…¨åˆ é™¤
3. æ£€æŸ¥ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡æ˜¯å¦æ¸…ç†

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šPyInstaller æ‰“åŒ…å¤±è´¥
**ç—‡çŠ¶**ï¼šæ‰¾ä¸åˆ°æŸäº›æ¨¡å—æˆ–ä¾èµ–

**è§£å†³**ï¼š
```bash
# æ›´æ–° PyInstaller
pip install --upgrade pyinstaller

# æ¸…ç†ç¼“å­˜
pyinstaller --clean Bazaar_Lens.py
```

### é—®é¢˜2ï¼šå›¾æ ‡æ²¡æœ‰æ‰“åŒ…è¿›å»
**ç—‡çŠ¶**ï¼šè¿è¡Œæ—¶æ‰¾ä¸åˆ°å›¾æ ‡æ–‡ä»¶

**è§£å†³**ï¼š
- æ£€æŸ¥ `6.0/crawlers/*/icons/` ç›®å½•æ˜¯å¦å­˜åœ¨
- ç¡®è®¤å›¾æ ‡æ–‡ä»¶æ˜¯ `.webp` æ ¼å¼
- é‡æ–°è¿è¡Œ `build.py` æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

### é—®é¢˜3ï¼šOCR æ— æ³•ä½¿ç”¨
**ç—‡çŠ¶**ï¼šç¨‹åºæç¤ºæ‰¾ä¸åˆ° Tesseract

**è§£å†³**ï¼š
- ç¡®ä¿ `tesseract-ocr-w64-setup-5.5.0.20241111.exe` å­˜åœ¨
- å®‰è£…æ—¶é€‰æ‹©é»˜è®¤è·¯å¾„ï¼š`C:\Program Files\Tesseract-OCR`
- æˆ–åœ¨ç¨‹åºä¸­é‡æ–°è®¾ç½® OCR è·¯å¾„

### é—®é¢˜4ï¼šInno Setup ç¼–è¯‘é”™è¯¯
**ç—‡çŠ¶**ï¼šæ‰¾ä¸åˆ°æºæ–‡ä»¶

**è§£å†³**ï¼š
```
1. ç¡®ä¿ dist/Bazaar_Lens.exe å­˜åœ¨
2. ç¡®ä¿æ‰€æœ‰ [Files] éƒ¨åˆ†çš„æºæ–‡ä»¶éƒ½å­˜åœ¨
3. æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆä½¿ç”¨åæ–œæ  \\ï¼‰
```

## ğŸ“ å‘å¸ƒæ£€æŸ¥æ¸…å•

æ‰“åŒ…å‰ï¼š
- [ ] æµ‹è¯•ä¸»ç¨‹åºåŠŸèƒ½æ­£å¸¸
- [ ] æ£€æŸ¥æ‰€æœ‰å¿…é¡»æ–‡ä»¶å­˜åœ¨
- [ ] æ›´æ–°ç‰ˆæœ¬å·ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ›´æ–° Help.txt æ–‡æ¡£
- [ ] æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œæ—¥å¿—

æ‰“åŒ…åï¼š
- [ ] æµ‹è¯• exe èƒ½æ­£å¸¸è¿è¡Œ
- [ ] æµ‹è¯• OCR åŠŸèƒ½
- [ ] æµ‹è¯•å›¾æ ‡åŠ è½½
- [ ] æµ‹è¯•çª—å£æ£€æµ‹

å®‰è£…ç¨‹åºï¼š
- [ ] æµ‹è¯•å®‰è£…æµç¨‹
- [ ] æµ‹è¯•åŠŸèƒ½å®Œæ•´æ€§
- [ ] æµ‹è¯•å¸è½½æµç¨‹
- [ ] å‡†å¤‡å‘å¸ƒè¯´æ˜

## ğŸ¯ å¿«é€Ÿæ‰“åŒ…å‘½ä»¤

```bash
# ä¸€é”®å®Œæ•´æ‰“åŒ…ï¼ˆæ¨èï¼‰
python build.py && "C:\Program Files (x86)\Inno Setup 6\ISCC.exe" Bazaar_Lens_Installer.iss

# æˆ–åˆ†æ­¥æ‰§è¡Œ
python build.py
# ç„¶åç”¨ Inno Setup ç¼–è¯‘ Bazaar_Lens_Installer.iss
```

## ğŸ“Š æ–‡ä»¶å¤§å°å‚è€ƒ

| é¡¹ç›® | å¤§å° |
|------|------|
| Bazaar_Lens.exe | 50-80 MB |
| æ€ªç‰©å›¾æ ‡ | 15-20 MB |
| äº‹ä»¶å›¾æ ‡ | 5-10 MB |
| OCRå®‰è£…ç¨‹åº | 30 MB |
| OCRè¯­è¨€æ•°æ® | 10 MB |
| **å®‰è£…ç¨‹åºæ€»è®¡** | **110-150 MB** |

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°æµç¨‹

1. ä¿®æ”¹ `Bazaar_Lens.py` ä¸­çš„ `VERSION`
2. è¿è¡Œ `python build.py` é‡æ–°æ‰“åŒ…
3. ç”¨ Inno Setup ç¼–è¯‘æ–°çš„å®‰è£…ç¨‹åº
4. æµ‹è¯•æ–°ç‰ˆæœ¬
5. å‘å¸ƒåˆ° GitHub/ç½‘ç›˜ç­‰

---

**æ³¨æ„**ï¼š
- æ‰€æœ‰æ›´æ–°ç›¸å…³åŠŸèƒ½å·²ç§»é™¤ï¼Œä¸éœ€è¦æ‰“åŒ…
- åªåŒ…å«è¿è¡Œå¿…éœ€çš„æ•°æ®æ–‡ä»¶å’Œå›¾æ ‡
- 6.0 ç›®å½•ä¸­çš„çˆ¬è™«è„šæœ¬å’Œå¼€å‘æ–‡ä»¶ä¸ä¼šæ‰“åŒ…

