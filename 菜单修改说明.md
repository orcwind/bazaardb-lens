# ç³»ç»Ÿæ‰˜ç›˜èœå•ä¿®æ”¹è¯´æ˜

## ğŸ“‹ ä¿®æ”¹å†…å®¹

### 1. ç³»ç»Ÿæ‰˜ç›˜èœå•ç®€åŒ–

**ä¿®æ”¹å‰**ï¼ˆ9ä¸ªé€‰é¡¹ï¼‰ï¼š
- Help
- Set tesseract-ocr.exe Path
- Auto Update
- Check for Updates
- Show Console
- Debug Window Detection
- Debug Icon Loading
- Cleanup Legacy Icons
- Quit

**ä¿®æ”¹å**ï¼ˆ3ä¸ªé€‰é¡¹ï¼‰ï¼š
- âœ… **å¸®åŠ© Help**
- âœ… **è®¾ç½®è¯†åˆ«å®‰è£…ä½ç½® Set OCR Path**
- âœ… **é€€å‡º Quit**

### 2. æš‚æ—¶éšè—çš„åŠŸèƒ½

ä»¥ä¸‹åŠŸèƒ½å·²æ³¨é‡Šä¿ç•™ï¼Œéœ€è¦æ—¶å¯ä»¥å–æ¶ˆæ³¨é‡Šæ¢å¤ï¼š

```python
# pystray.MenuItem("Auto Update", self.toggle_auto_update, ...),
# pystray.MenuItem("Check for Updates", self.check_for_updates),
# pystray.MenuItem("Show Console", self.toggle_console, ...),
# pystray.MenuItem("Debug Window Detection", self.debug_window_detection),
# pystray.MenuItem("Debug Icon Loading", self.debug_icon_loading),
# pystray.MenuItem("Cleanup Legacy Icons", self.cleanup_legacy_icons),
```

### 3. å®‰è£…å®Œæˆåçš„é€‰é¡¹

åœ¨ Inno Setup å®‰è£…è„šæœ¬ä¸­æ·»åŠ äº†å®‰è£…å®Œæˆåçš„æ“ä½œé€‰é¡¹ï¼š

**å®‰è£…å®Œæˆåä¼šæ˜¾ç¤ºï¼š**
1. â˜ **æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ (View Help Document)** - é»˜è®¤ä¸å‹¾é€‰
2. â˜‘ **å¯åŠ¨ Bazaar_Lens (Launch Bazaar_Lens)** - é»˜è®¤å‹¾é€‰

ç”¨æˆ·å¯ä»¥é€‰æ‹©æ˜¯å¦åœ¨å®‰è£…å®Œæˆåç«‹å³æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£å’Œå¯åŠ¨ç¨‹åºã€‚

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### ç”¨æˆ·æ“ä½œæµç¨‹

1. **å®‰è£…ç¨‹åº**
   - è¿è¡Œ `Bazaar_Lens_Installer.exe`
   - é€‰æ‹©å®‰è£…è·¯å¾„
   - ç­‰å¾…å®‰è£…å®Œæˆ

2. **å®‰è£…å®Œæˆé¡µé¢**
   - å¯é€‰ï¼šå‹¾é€‰"æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£"
   - é»˜è®¤ï¼šå‹¾é€‰"å¯åŠ¨ Bazaar_Lens"
   - ç‚¹å‡»"å®Œæˆ"

3. **è¿è¡Œç¨‹åº**
   - ç¨‹åºå¯åŠ¨åä¼šåœ¨ç³»ç»Ÿæ‰˜ç›˜æ˜¾ç¤ºå›¾æ ‡
   - å³é”®ç‚¹å‡»æ‰˜ç›˜å›¾æ ‡æŸ¥çœ‹èœå•

4. **èœå•é€‰é¡¹**
   - **å¸®åŠ© Help**ï¼šæ‰“å¼€ Help.txt å¸®åŠ©æ–‡æ¡£
   - **è®¾ç½®è¯†åˆ«å®‰è£…ä½ç½® Set OCR Path**ï¼šé€‰æ‹© tesseract.exe è·¯å¾„
   - **é€€å‡º Quit**ï¼šé€€å‡ºç¨‹åº

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### ä»£ç ä¿®æ”¹ä½ç½®

**æ–‡ä»¶ï¼š`Bazaar_Lens.py`**
- è¡Œæ•°ï¼šçº¦ 2398-2410
- ä½ç½®ï¼š`SystemTray.create_tray_icon()` æ–¹æ³•ä¸­
- ä¿®æ”¹ï¼šç®€åŒ– `menu` å…ƒç»„ï¼Œåªä¿ç•™3ä¸ªèœå•é¡¹

**æ–‡ä»¶ï¼š`Bazaar_Lens_Installer.iss`**
- è¡Œæ•°ï¼š51-53
- ä½ç½®ï¼š`[Run]` éƒ¨åˆ†
- æ·»åŠ ï¼šä¸¤ä¸ª postinstall é€‰é¡¹

### èœå•æ ‡å¿—è¯´æ˜

```python
pystray.MenuItem("å¸®åŠ© Help", self.show_help)
```
- æ˜¾ç¤ºæ–‡æœ¬ï¼šä¸­è‹±æ–‡åŒè¯­
- å›è°ƒå‡½æ•°ï¼š`self.show_help` - æ‰“å¼€ Help.txt
- æ— ç‰¹æ®Šæ ‡å¿—

```python
pystray.MenuItem("è®¾ç½®è¯†åˆ«å®‰è£…ä½ç½® Set OCR Path", self.set_ocr_path_simple)
```
- æ˜¾ç¤ºæ–‡æœ¬ï¼šä¸­è‹±æ–‡åŒè¯­
- å›è°ƒå‡½æ•°ï¼š`self.set_ocr_path_simple` - æ‰“å¼€æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†
- æ— ç‰¹æ®Šæ ‡å¿—

```python
pystray.MenuItem("é€€å‡º Quit", self.quit_app)
```
- æ˜¾ç¤ºæ–‡æœ¬ï¼šä¸­è‹±æ–‡åŒè¯­
- å›è°ƒå‡½æ•°ï¼š`self.quit_app` - é€€å‡ºç¨‹åº
- æ— ç‰¹æ®Šæ ‡å¿—

### å®‰è£…åé€‰é¡¹æ ‡å¿—

```ini
Filename: "{app}\Help.txt"; 
Description: "æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ (View Help Document)"; 
Flags: postinstall shellexec skipifsilent unchecked
```
- `postinstall`ï¼šå®‰è£…å®Œæˆåæ˜¾ç¤º
- `shellexec`ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç¨‹åºæ‰“å¼€
- `skipifsilent`ï¼šé™é»˜å®‰è£…æ—¶è·³è¿‡
- `unchecked`ï¼šé»˜è®¤ä¸å‹¾é€‰

```ini
Filename: "{app}\Bazaar_Lens.exe"; 
Description: "å¯åŠ¨ Bazaar_Lens (Launch Bazaar_Lens)"; 
Flags: postinstall skipifsilent nowait
```
- `postinstall`ï¼šå®‰è£…å®Œæˆåæ˜¾ç¤º
- `skipifsilent`ï¼šé™é»˜å®‰è£…æ—¶è·³è¿‡
- `nowait`ï¼šä¸ç­‰å¾…ç¨‹åºé€€å‡ºï¼ˆé»˜è®¤å‹¾é€‰ï¼‰

## ğŸ“ æ¢å¤å…¶ä»–åŠŸèƒ½

å¦‚éœ€æ¢å¤è°ƒè¯•æˆ–å…¶ä»–åŠŸèƒ½ï¼Œåœ¨ `Bazaar_Lens.py` ä¸­å–æ¶ˆå¯¹åº”è¡Œçš„æ³¨é‡Šï¼š

```python
menu = (
    pystray.MenuItem("å¸®åŠ© Help", self.show_help),
    pystray.MenuItem("è®¾ç½®è¯†åˆ«å®‰è£…ä½ç½® Set OCR Path", self.set_ocr_path_simple),
    pystray.MenuItem("é€€å‡º Quit", self.quit_app),
    # å–æ¶ˆä¸‹é¢çš„æ³¨é‡Šå³å¯æ¢å¤åŠŸèƒ½
    pystray.MenuItem("æ˜¾ç¤ºæ§åˆ¶å° Show Console", self.toggle_console, 
                     checked=lambda item: self.helper.config.get("show_console", False)),
    pystray.MenuItem("è°ƒè¯•çª—å£æ£€æµ‹ Debug Window", self.debug_window_detection),
    pystray.MenuItem("è°ƒè¯•å›¾æ ‡åŠ è½½ Debug Icon", self.debug_icon_loading),
)
```

## âœ… ä¿®æ”¹å®Œæˆ

- [x] ç®€åŒ–ç³»ç»Ÿæ‰˜ç›˜èœå•ä¸º3ä¸ªé€‰é¡¹
- [x] ä¿®æ”¹èœå•æ–‡æœ¬ä¸ºä¸­è‹±æ–‡åŒè¯­
- [x] æ³¨é‡Šä¿ç•™å…¶ä»–åŠŸèƒ½ä»£ç 
- [x] æ·»åŠ å®‰è£…å®Œæˆåçš„é€‰é¡¹
- [x] ç¡®è®¤ Help.txt ä¸ä¼šè‡ªåŠ¨æ‰“å¼€ï¼ˆéœ€ç”¨æˆ·å‹¾é€‰ï¼‰

## ğŸ‰ ç”¨æˆ·ä½“éªŒæ”¹è¿›

1. **èœå•æ›´ç®€æ´**ï¼šåªæ˜¾ç¤ºæœ€å¸¸ç”¨çš„åŠŸèƒ½
2. **åŒè¯­æ˜¾ç¤º**ï¼šæ–¹ä¾¿ä¸­è‹±æ–‡ç”¨æˆ·
3. **å¯é€‰å¸®åŠ©**ï¼šå®‰è£…åå¯é€‰æ‹©æŸ¥çœ‹å¸®åŠ©
4. **è‡ªåŠ¨å¯åŠ¨**ï¼šå®‰è£…åé»˜è®¤å¯åŠ¨ç¨‹åº
5. **ä¿ç•™æ‰©å±•**ï¼šè°ƒè¯•åŠŸèƒ½ä»£ç ä¿ç•™ï¼Œä¾¿äºåç»­æ¢å¤

