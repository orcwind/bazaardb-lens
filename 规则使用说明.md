# Python 代码规范规则 - 使用说明

## 方法1：全局规则设置（推荐，适用于所有项目）

这是最简单的方法，设置一次后，所有项目都会自动应用这些规则。

### 操作步骤：

1. **打开 Cursor 设置**
   - Windows/Linux: 按 `Ctrl + ,`
   - macOS: 按 `Cmd + ,`
   - 或者：点击菜单 `File` > `Preferences` > `Settings`

2. **导航到 AI 规则设置**
   - 在设置搜索框中输入 "AI 规则" 或 "Rules"
   - 或者直接导航到：`通用` > `AI 规则`

3. **复制规则内容**
   - 打开 `python_code_style_rules.md` 文件
   - 从 "## 规则内容" 开始复制所有内容
   - 或者直接复制下面的简化版本

4. **粘贴并保存**
   - 将规则内容粘贴到 Cursor 的 AI 规则文本框中
   - 保存设置

### 简化版规则（可直接复制）：

```
# Python 代码规范规则

## 严格代码规范要求

在生成任何 Python 代码时，必须严格遵循以下规范：

### 1. 缩进规范
- 必须使用4个空格进行缩进，绝对禁止使用制表符（Tab）
- 所有代码块必须使用一致的4空格缩进
- 混合缩进（空格+制表符）是严格禁止的

### 2. 语法结构规范
- 所有冒号（:）后面必须有正确缩进的代码块
  - if/elif/else 语句后必须有缩进的代码块
  - for/while 循环后必须有缩进的代码块
  - try/except/finally 语句后必须有缩进的代码块
  - def 函数定义后必须有缩进的函数体
  - class 类定义后必须有缩进的类体
  - with 语句后必须有缩进的代码块

### 3. 代码块完整性
- 所有控制结构（if/else、for/while、try/except）必须包含完整的代码块
- 不允许空的代码块（除非使用 pass 语句）
- 嵌套结构必须保持正确的缩进层级

### 4. 代码验证要求
- 在提供代码之前，必须进行语法检查
- 模拟运行代码逻辑，确保没有语法错误
- 确保所有括号、引号、冒号都正确配对
- 确保所有缩进层级正确

### 5. 代码生成流程
1. 生成代码时，先检查语法正确性
2. 验证所有缩进使用4个空格（不是制表符）
3. 确认所有冒号后都有正确缩进的代码块
4. 确认所有控制结构完整
5. 最后再提供代码

### 6. 禁止事项
- 禁止使用制表符（Tab）
- 禁止混合使用空格和制表符
- 禁止冒号后缺少代码块
- 禁止不完整的控制结构
- 禁止在未验证语法的情况下提供代码

## 执行要求
- 每次生成 Python 代码时，必须自动应用这些规则
- 不需要用户提醒或确认，直接生成符合规范的代码
- 如果发现代码不符合规范，必须立即修复，直到完全符合要求
- 在提供代码前，进行自我检查，确保没有语法错误
```

---

## 方法2：项目级规则（适用于特定项目）

如果你只想在特定项目中应用这些规则，可以使用以下方法：

### 选项A：使用 .cursorrules 文件

1. 将 `python_code_style_rules.md` 文件中的规则内容复制
2. 在目标项目的根目录创建 `.cursorrules` 文件
3. 将规则内容粘贴进去
4. 保存文件

### 选项B：使用 .cursor/rules 目录（新方法）

1. 在目标项目的根目录创建 `.cursor` 文件夹（如果不存在）
2. 在 `.cursor` 文件夹中创建 `rules` 文件夹
3. 在 `rules` 文件夹中创建 `python_code_style.mdc` 文件
4. 将以下内容写入文件：

```markdown
---
description: Python 代码风格规范
alwaysApply: true
---

# Python 代码规范规则

[在这里粘贴完整的规则内容]
```

---

## 方法3：批量应用到多个项目

如果你有多个项目需要应用这些规则：

### Windows 批处理脚本：

```batch
@echo off
set RULES_FILE=python_code_style_rules.md
set TARGET_FILE=.cursorrules

for /d %%d in (D:\PythonProject\*) do (
    if exist "%%d" (
        copy "%RULES_FILE%" "%%d\%TARGET_FILE%" >nul 2>&1
        echo 已复制规则到: %%d
    )
)
```

### Linux/macOS Shell 脚本：

```bash
#!/bin/bash
RULES_FILE="python_code_style_rules.md"
TARGET_FILE=".cursorrules"

for project_dir in ~/Projects/*/; do
    if [ -d "$project_dir" ]; then
        cp "$RULES_FILE" "${project_dir}${TARGET_FILE}"
        echo "已复制规则到: $project_dir"
    fi
done
```

---

## 验证规则是否生效

设置完成后，可以通过以下方式验证：

1. 在 Cursor 中打开任意 Python 项目
2. 使用 AI 助手生成一些 Python 代码
3. 检查生成的代码是否符合规范：
   - 使用4个空格缩进（不是制表符）
   - 所有冒号后都有正确缩进的代码块
   - 没有语法错误

---

## 注意事项

- **全局规则优先级**：如果同时设置了全局规则和项目规则，项目规则会覆盖全局规则
- **规则更新**：如果需要更新规则，修改全局设置或项目规则文件后，Cursor 会自动重新加载
- **备份**：建议将规则内容保存到版本控制系统，方便团队共享

---

## 常见问题

**Q: 规则设置后没有生效？**
A: 尝试重启 Cursor，或者检查规则格式是否正确。

**Q: 如何临时禁用规则？**
A: 可以在全局设置中清空 AI 规则，或者删除项目中的 `.cursorrules` 文件。

**Q: 团队如何共享规则？**
A: 将规则文件提交到 Git 仓库，团队成员克隆后自动应用。
